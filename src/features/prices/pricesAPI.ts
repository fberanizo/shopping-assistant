import j0 from '../../data/2023-12-22-SONDA.json';
import j1 from '../../data/2023-12-27-SONDA.json';
import j2 from '../../data/2023-12-29-SONDA.json';
import j3 from '../../data/2024-01-11-SONDA.json';
import j4 from '../../data/2024-01-13-SONDA.json';
import j5 from '../../data/2024-01-14-PAGUE-MENOS.json';
import j6 from '../../data/2024-01-15-SONDA.json';
import j7 from '../../data/2024-01-16-PAGUE-MENOS.json';
import j8 from '../../data/2024-01-21-PAGUE-MENOS.json';
import j9 from '../../data/2024-01-28-CARREFOUR.json';
import j10 from '../../data/2024-01-24-SONDA.json';
import j11 from '../../data/2024-01-23-SONDA.json';
import j12 from '../../data/2024-01-21-CARREFOUR.json';
import j13 from '../../data/2024-01-29-SONDA.json';
import j14 from '../../data/2024-01-29-SUMERBOL.json';
import j15 from '../../data/2024-02-01-SUMERBOL.json';
import j16 from '../../data/2024-02-02-PERALTA.json';
import j17 from '../../data/2024-02-03-SONDA.json';
import j18 from '../../data/2024-02-04-PAO.json';
import j19 from '../../data/2024-02-05-SONDA.json';
import j20 from '../../data/2024-02-07-SONDA.json';
import j21 from '../../data/2024-02-09-PAO.json';
import j22 from '../../data/2024-02-10-SUMERBOL.json';
import j23 from '../../data/2024-02-11-PERALTA.json';
import j24 from '../../data/2024-02-12-CARREFOUR.json';
import j25 from '../../data/2024-02-13-SONDA.json';
import j26 from '../../data/2024-02-14-SONDA.json';
import j27 from '../../data/2024-02-15-PERALTA.json';
import j28 from '../../data/2024-02-16-SONDA.json';
import j29 from '../../data/2024-02-19-SONDA.json';
import j30 from '../../data/2024-02-19-SUMERBOL.json';
import j31 from '../../data/2024-02-22-SONDA.json';
import j32 from '../../data/2024-03-03-SUMERBOL.json';
import j33 from '../../data/2024-03-05-SUMERBOL.json';
import j34 from '../../data/2024-03-07-PAO.json';
import j35 from '../../data/2024-03-08-SONDA.json';
import j36 from '../../data/2024-03-10-CARREFOUR.json';
import j37 from '../../data/2024-03-11-SUMERBOL.json';
import j38 from '../../data/2024-03-15-SONDA.json';
import j39 from '../../data/2024-03-16-SUMERBOL.json';
import j40 from '../../data/2024-03-14-PERALTA.json';
import j41 from '../../data/2024-03-18-SONDA.json';
import j42 from '../../data/2024-03-19-SUMERBOL.json';
import j43 from '../../data/2024-03-22-SUMERBOL.json';
import j44 from '../../data/2024-03-25-SONDA.json';
import j45 from '../../data/2024-03-28-SUMERBOL.json';
import j46 from '../../data/2024-03-27-PAGUE-MENOS.json';
import j47 from '../../data/2024-03-29-CATO.json';
import j48 from '../../data/2024-03-31-SUMERBOL.json';
import j49 from '../../data/2024-04-01-SONDA.json';
import j50 from '../../data/2024-04-03-SUMERBOL.json';
import j51 from '../../data/2024-04-06-SUMERBOL.json';
import j52 from '../../data/2024-04-07-CARREFOUR.json';
import j53 from '../../data/2024-04-08-SUMERBOL.json';
import j54 from '../../data/2024-04-11-SONDA.json';
import j55 from '../../data/2024-04-14-CARREFOUR.json';
import j56 from '../../data/2024-04-15-SONDA.json';
import j57 from '../../data/2024-04-17-SUMERBOL.json';
import j58 from '../../data/2024-04-19-SUMERBOL.json';
import j59 from '../../data/2024-04-20-SUMERBOL.json';
import j60 from '../../data/2024-04-21-PAGUE-MENOS.json';
import j61 from '../../data/2024-04-22-SUMERBOL.json';
import j62 from '../../data/2024-04-23-SONDA.json';
import j63 from '../../data/2024-04-24-PERALTA.json';
import j64 from '../../data/2024-04-26-SONDA.json';
import j65 from '../../data/2024-04-28-PAGUE-MENOS.json';
import j66 from '../../data/2024-04-30-SUMERBOL.json';
import j67 from '../../data/2024-05-02-SONDA.json';
import j68 from '../../data/2024-05-03-SUMERBOL.json';
import j69 from '../../data/2024-05-04-PAGUE-MENOS.json';
import j70 from '../../data/2024-05-05-PERALTA.json';
import j71 from '../../data/2024-05-07-SUMERBOL.json';
import j72 from '../../data/2024-05-13-SONDA.json';
import j73 from '../../data/2024-05-14-SUMERBOL.json';
import j74 from '../../data/2024-05-25-SONDA.json';
import j75 from '../../data/2024-05-29-SUMERBOL.json';
import j76 from '../../data/2024-05-31-SONDA.json';
import j77 from '../../data/2024-06-03-SONDA.json';
import j78 from '../../data/2024-06-04-SUMERBOL.json';
import j79 from '../../data/2024-06-06-SONDA.json';
import j80 from '../../data/2024-06-08-SUMERBOL.json';
import j81 from '../../data/2024-06-10-SONDA.json';
import j82 from '../../data/2024-06-13-SONDA.json';
import j83 from '../../data/2024-06-17-SUMERBOL.json';
import j84 from '../../data/2024-06-18-SONDA.json';
import j85 from '../../data/2024-06-22-SONDA.json';
import j86 from '../../data/2024-06-23-SUMERBOL.json';
import j87 from '../../data/2024-06-24-SONDA.json';
import j88 from '../../data/2024-06-27-CATO.json';

const data = {
  '2023-12-22': j0,
  '2023-12-27': j1,
  '2023-12-29': j2,
  '2024-01-11': j3,
  '2024-01-13': j4,
  '2024-01-14': j5,
  '2024-01-15': j6,
  '2024-01-16': j7,
  '2024-01-21': j8,
  '2024-01-20': j12,
  '2024-01-23': j11,
  '2024-01-24': j10,
  '2024-01-28': j9,
  '2024-01-29': j13,
  '2024-01-30': j14,
  '2024-02-01': j15,
  '2024-02-02': j16,
  '2024-02-03': j17,
  '2024-02-04': j18,
  '2024-02-05': j19,
  '2024-02-07': j20,
  '2024-02-09': j21,
  '2024-02-10': j22,
  '2024-02-11': j23,
  '2024-02-12': j24,
  '2024-02-13': j25,
  '2024-02-14': j26,
  '2024-02-15': j27,
  '2024-02-16': j28,
  '2024-02-19': j29,
  '2024-02-20': j30,
  '2024-02-22': j31,
  '2024-03-03': j32,
  '2024-03-05': j33,
  '2024-03-07': j34,
  '2024-03-08': j35,
  '2024-03-10': j36,
  '2024-03-11': j37,
  '2024-03-15': j38,
  '2024-03-16': j39,
  '2024-03-14': j40,
  '2024-03-18': j41,
  '2024-03-19': j42,
  '2024-03-22': j43,
  '2024-03-25': j44,
  '2024-03-28': j45,
  '2024-03-27': j46,
  '2024-03-29': j47,
  '2024-03-31': j48,
  '2024-04-01': j49,
  '2024-04-03': j50,
  '2024-04-06': j51,
  '2024-04-07': j52,
  '2024-04-08': j53,
  '2024-04-11': j54,
  '2024-04-14': j55,
  '2024-04-15': j56,
  '2024-04-17': j57,
  '2024-04-19': j58,
  '2024-04-20': j59,
  '2024-04-21': j60,
  '2024-04-22': j61,
  '2024-04-23': j62,
  '2024-04-24': j63,
  '2024-04-26': j64,
  '2024-04-28': j65,
  '2024-04-30': j66,
  '2024-05-02': j67,
  '2024-05-03': j68,
  '2024-05-04': j69,
  '2024-05-05': j70,
  '2024-05-07': j71,
  '2024-05-13': j72,
  '2024-05-14': j73,
  '2024-05-25': j74,
  '2024-05-29': j75,
  '2024-05-31': j76,
  '2024-06-03': j77,
  '2024-06-04': j78,
  '2024-06-06': j79,
  '2024-06-08': j80,
  '2024-06-10': j81,
  '2024-06-13': j82,
  '2024-06-17': j83,
  '2024-06-18': j84,
  '2024-06-22': j85,
  '2024-06-23': j86,
  '2024-06-24': j87,
  '2024-06-27': j88,
};

export function fetchPrices(regex: string) {
  let x: Array<string> = [];
  let y: Array<number> = [];
  let text: Array<string> = [];
  let venues: Array<string> = [];
  for (let entry of Object.entries(data)) {
    for (let i = 0; i < entry[1]['names'].length; i++) {
      if (entry[1]['names'][i].match(new RegExp(regex, "i"))) {
        x.push(entry[0]);
        y.push(entry[1]['values'][i] as number);
        text.push(entry[1]['names'][i] + "<br>R$" + entry[1]['values'][i] + "<br>" + entry[1]['venue']);
        venues.push(entry[1]['venue']);
        break;
      }
    }
  }

  let uniqueVenues: Array<string> = Object.values(data).map(d => d['venue']).filter((v, i, a) => a.indexOf(v) === i);
  return Promise.resolve({data: {x, y, text, venues, uniqueVenues}});
}

export function fetchLatestPrice(item: string, index: number) {
  const regex: string = `(${item})`;
  let price: number = 0;
  for (let entry of Object.entries(data)) {
    for (let i = 0; i < entry[1]['names'].length; i++) {
      if (entry[1]['names'][i].match(new RegExp(regex, "i"))) {
        price = entry[1]['values'][i] as number;
      }
    }
  }

  return Promise.resolve({data: {item, index, price}});
}
